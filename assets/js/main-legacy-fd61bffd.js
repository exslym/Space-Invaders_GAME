!function(){function t(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}System.register([],(function(e,i){"use strict";var o=document.createElement("style");return o.textContent='/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}*,*:after,*:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body{background-color:#0c181d;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-style:normal;font-weight:400}a{text-decoration:none!important;color:inherit}h1,h2,h3,h4,h5,h6,p,li{margin:0;padding:0;-webkit-font-feature-settings:"ordn" on;-moz-font-feature-settings:"ordn" on;font-feature-settings:"ordn" on;-webkit-font-feature-settings:"pnum" on,"lnum" on;-moz-font-feature-settings:"pnum" on,"lnum" on;font-feature-settings:"pnum" on,"lnum" on}.wrapper{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh;margin:0 auto;padding:0}.section{padding:clamp(16px,3.9vw,30px);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;position:relative}.section__content{margin:0 auto;max-width:-webkit-calc(clamp(900px,67.36vw,1280px) + clamp(16px,3.9vw,30px) * 2);max-width:-moz-calc(clamp(900px,67.36vw,1280px) + clamp(16px,3.9vw,30px) * 2);max-width:calc(clamp(900px,67.36vw,1280px) + clamp(16px,3.9vw,30px)*2);width:100%;height:100%}canvas{-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;outline:1px solid rgba(255,255,255,.2)}button{-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;border:none;position:absolute;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);cursor:pointer;pointer-events:visible;font-size:clamp(20px,6.2vw,62px);line-height:140%;background:#fff;text-align:center;text-decoration:none;color:inherit}button:hover{background:rgb(228,228,228)}#start{padding:0 clamp(20px,4vw,40px);margin:0;display:block;left:50%;top:50%}#restart{padding:0 clamp(20px,4vw,40px);margin:0;display:none;margin-top:clamp(10px,4vw,50px);left:50%;top:53%}#endGame{display:none;position:absolute;left:50%;top:47%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:clamp(40px,8vw,80px);color:#fff;word-break:keep-all;width:100%;text-align:center}.controls{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:0 auto;position:fixed;left:50%;bottom:20px;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translate(-50%);width:-webkit-calc(100% - clamp(16px,3.9vw,30px) * 2);width:-moz-calc(100% - clamp(16px,3.9vw,30px) * 2);width:calc(100% - (clamp(16px,3.9vw,30px)*2))}.controls img{display:block;margin:0;padding:0;width:100%;max-width:clamp(80px,15.625vw,120px)}.controls__arrows{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:clamp(180px,32.55vw,250px);width:100%}@media (max-width: 425px){.controls img{max-width:clamp(60px,18.82vw,80px)}.controls__arrows{max-width:clamp(140px,42.35vw,180px)}}\n',document.head.appendChild(o),{execute:function(){const e=""+new URL("../images/space2-d13d609f.png",i.meta.url).href,o=""+new URL("../wav/shoot-29f56726.wav",i.meta.url).href;class n{constructor(t,e,i,o,n,s,r){this.canvas=t,this.x=e-s/2,this.y=i,this.velocity=o,this.bulletColor=n,this.width=s,this.height=r}draw(t){this.y-=this.velocity,t.fillStyle=this.bulletColor,t.fillRect(this.x,this.y,this.width,this.height)}collideWith(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}let s=window,r=document.getElementsByTagName("body")[0],a=s.innerWidth||r.clientWidth,l=5,h=20;a<=1024&&(l*=.85,h*=.85),a<=600&&(l*=.75,h*=.75),a<=425&&(l*=.7,h*=.7),Audio.prototype.stop=function(){this.pause(),this.currentTime=0},Audio.prototype.restart=function(){this.pause(),this.currentTime=0,this.play()};class d{constructor(e,i,n,s){t(this,"bullets",[]),t(this,"timeTillNextBulletAllowed",0),this.canvas=e,this.maxBulletsAtATime=i,this.bulletColor=n,this.soundEnabled=s,this.shootSound=new Audio(o),this.shootSound.volume=.5}draw(t){this.bullets=this.bullets.filter((t=>t.y+t.width>0&&t.y<=this.canvas.height)),this.bullets.forEach((e=>e.draw(t))),this.timeTillNextBulletAllowed>0&&this.timeTillNextBulletAllowed--}collideWith(t){const e=this.bullets.findIndex((e=>e.collideWith(t)));if(e>=0)return this.bullets.splice(e,1),!0}shoot(t,e,i,o=0){if(this.timeTillNextBulletAllowed<=0&&this.bullets.length<this.maxBulletsAtATime){const s=new n(this.canvas,t,e,i,this.bulletColor,l,h);this.bullets.push(s),this.soundEnabled&&this.shootSound.restart(),this.timeTillNextBulletAllowed=o}}}const c="data:audio/wav;base64,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QS9Jy/cbJpHO2x4Qm+CYLHTLsSUcxuNSL5nHeyxn24IqqcV4NCm871Axtc5ELaPEpiMl47QpXN2qKWXTrC4ox981PIrathtqyYIxMbzqcy6Jy1gxrsR3NUHS0h8gwtZIM8bHMiun0E8yvM1VMYjBoCsh2dxPN2fOxyQx270pTNXGJCa32GM+WcrqLyinxl4ttsJaPEXW2ixN0rwhLYvVzSQy2b8qK7nXWkVkzNwiPdC6KSWozoA5cc2sKUTcozJTztcwKaLCfD5GvuBBO824KTTQxz0xkcpwPZPKji9pzJMtZM+cL1nOsCFqzXRAVcXaPjt8yLMhXM+JMW7Cqig726gvXc66JzSV1bglQtG/LSrKuDJJheC6I3C/li0qyc5GPqDCdjxpz6wuQ83DLEjOtSwxtchrQnTGriszpNh5M6+zWT1f0p41ZM26JzOpzndBWLfTOzzIsDs9dMu+KUvUsS47xcRBRKTDaTmotVdCbcm/KDPAwnhAUM3LMjbDtk9JY9K+MlPLwC04rrxWQcSwLk/QqTFEwcZkRlTKxyxBfc+1M1HIvi88rLhUQ7y5VEGQw2tJb8LOPD2VuG88p7FoRVDOwDpPx603U4zNrx0vtbhOU2bDzDZJa8a7L06QzYI8Xr3BQkFyxJg0h7aJOkTPxE5FmrZdSZ27aE1nts9FSMCqQD+msVpVabzMQ0vGq0BMaMbLQUl5vrErSJ3FpzJByqRCWJHSij9fuL5KRG+/uCpHyaw5UpXGri9Au7RHV8GfOFLDrT5SuLNLS5y4aEWUtWlKdMCyMkiot2FMi7KWM1zEmTdQw7dBV8OTQlmnv2hMbL+iNVK9skNPdcK9MEaWuXRFoaZrTlnEuTlWwKQ+Uqm2YEydqnlBcr11TmyrxXQ8c7R9R2G9tTxZw6I/TJW4eEaiqFBUm7hpUG6vuERTlrGYMUe7r2BPYbi1R1Sqq1ZUg8CnNE2nsm9LW7O5V1GNs3JTba28VVJwuqo3W8CjPE6dtW1UirmVPVOrtnVKWMGuQ1Z4v7Q0VaiuWlK0nFVVb8GkQWOtsGtHYLuiQWK4o0hauaVIU5yve0l0vYVQc7yfO1aFxZ0/bbadOlKdsnlLXJXCg0RXn7ZqTXmzh0prtKBBW6mpaE5js61JX7mgSlmAtqM5Xb6fRlavn1JikrqZP1O0plZYkKt5Umq4pEpdnatoVIG1lEBcisCmN1e4mEZdn7BpWJugclB8tXpSf7OWQlitq1del6uFRWq5g01njcWJSX+nhEZWo7FpWYarhUpquo9NaaymT1iOqnpQaZK+h0dfrpxJYn66n0FajbKLS2WtnEpinKh7S3Owj0VluZFLareVS2GgpGBgp5plUoymZGR3n7NcXoKwmz9WnaRoXIWvj0hmqpZVY6OlZFtwlbl1UIGib1eMpG9cjqOATnGwjUxiraJqW3KzlEppo6NkWZGZY2SIsX9Wcoq4iUVeo6BdY3qxnEhelqRtYIirg1Jpk69pW5eWaGBrkrh2WJCYbF93sZVIZnywpVRgiKWCUGyrl1JojaqFU2eWrIJRZKmdYmNxqZ9Va5aieFdwq5dNZ6mQXWaLsnxec4W1hk1mopldX3KmllBpkaNyWpKTZGWDq4pPa4CymE5fh6OCVnOnj1hsmp51WWyqmVlmmJRwY3Gtklptj6p5WWyPq4JSbKqLUGuCrZ5Van+pmVBllJptZIigeV51o5NdaZGgbmR3oJ1gZ3Wok1Fpi6WIVmeemmVpk5xzYnScmVtroZFdbXSTrmpqdoqoa1+JlXRgcqOUXWuFo4tTaaCTYG6ZkmlpdY2thVRxo4RWbX6llWFsf6aSUWySimdrmZBobYSkgmF0mJVmaoGkiVNpjaB9YG6Mp3lldJuRXmyHn4RYbIqlgl52oIlbbIqcgmFyoI9bcJaNZm2WkWhslo5tbH+jiFtuhqGEYHCUlW9lgpl9Y3GJqIhabI+Yc2p9mYpdepp/Y32ed2d0iqd6YXOVkWlsiJJxbXaFrIVdbYuWcWyGk4BhcJeTaXN+jplra3qUk2Vsgpl/ZXiUi2pxf6CLYW2ImHtpfpqKXm+LlXtpd5iPam6HknppdpmPbHF0kZFpb3yZh11yloZmdXyUlm1we5eKYHB8mI5pcH2ahWZ0fpqRbG9zjZZudHqFnnNvgA==";class m{constructor(t,e,i,o,n){this.x=t,this.y=e,this.width=o,this.height=n,this.image=new Image,1===i?this.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAAAXNSR0IArs4c6QAAAMlJREFUWEftmMsRgCAMREkz9kSF9GQzON40HN7s8HHUeA0hy8vCgJbgq2Wr1yGWd6McJa7Oj8XVCRWx51h1/hD8OGEvQG3h6Hy0xOiCvQsOweTh6YR9ARLUG6dzHi0RgqEF3ydMFrC83xjVskm2VfM98cbDIdjx/x9hsoBk0AWDLQRPpvx+wv7cW20Zqt8QpoTJHU9UPwT3dmA4YbpNqYLpQt/E5YTFP1JCsGoB9RXeEFYL0rlMm8bXU/cEvumICAlQF0gAQ/BsSxwAIwm07NURxAAAAABJRU5ErkJggg==":2===i?this.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAAAXNSR0IArs4c6QAAAMlJREFUWEftmMsRgCAMRKEKCrA1yqI1C7AKHW8aD292+DhovJKQ52ZBJAZ48pr2a0hZtkg5yrg6PxZXJ1Rgz1h1fgd+XWELoLawdT5aonXB2hd2YPJwd4VtAQKqHad9Hi3hwNCC7ytMFijLdtMor0myrZpvFX942IGN/v9TmCwgGXRAcHTgzirPr7Dd90Zbhuo/FKaEzh0PVN+BazvQXGE6TanAdKC347IlHBhuluZXuNZzNp8WDcUTD/7T0b0EAdCHR10TDtzbEgcPdARENcIVZgAAAABJRU5ErkJggg==":3===i&&(this.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAAAXNSR0IArs4c6QAAAMZJREFUWEftmMERgDAIBKUc20phtmU5Ov4UHzs3hDgqfgNhPS4xxiZ45rZt55B1MaMcZVydH4urEyqwR6w6fwE/rrAHUFvYOx8t0btg9IULmDycrrAvQEDRcdrn0RIFDC34vsJkgXW5umhul6MGWljN94rfPFzATvP/KUwWQFMODrACTlb8/Qr7fW+0Zaj+TWFKSO74RPULONqB7grTaUoFpgO9H5ctUcBws/R+haOe8/m0aCieePCfju4lCIA+POqaKOBsS+ykewacq1lhmAAAAABJRU5ErkJggg==")}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}move(t,e){this.x+=t,this.y+=e}collideWith(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}const p={left:0,right:1,downLeft:2,downRight:3};let u=window,w=document.getElementsByTagName("body")[0],g=u.innerWidth||w.clientWidth,A=44,b=32,f=1.36,y=1.36,x=1.6,v=1;g<=1024&&(A*=.85,b*=.85),g<=600&&(A*=.7,b*=.7,f*=1.1,y*=1,x=1,v=.7),g<=425&&(A*=.55,b*=.55,f*=1.2,y*=1.1,x=.9,v=.6),Audio.prototype.stop=function(){this.pause(),this.currentTime=0},Audio.prototype.restart=function(){this.pause(),this.currentTime=0,this.play()};class k{constructor(e,i,o){t(this,"enemyMap",[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,3,3,3,3,2,2,2],[2,2,2,3,3,3,3,2,2,2],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]]),t(this,"enemyRows",[]),t(this,"currentDirection",p.right),t(this,"xVelocity",0),t(this,"yVelocity",0),t(this,"defaultXVelocity",x),t(this,"defaultYVelocity",v),t(this,"moveDownTimerDefault",32),t(this,"moveDownTimer",this.moveDownTimerDefault),t(this,"fireBulletTimerDefault",100),t(this,"fireBulletTimer",this.fireBulletTimerDefault),this.canvas=e,this.enemyBulletController=i,this.playerBulletController=o,this.createEnemies(),this.enemyDeathSound=new Audio(c),this.enemyDeathSound.volume=.5}draw(t){this.decrementMoveDownTimer(),this.updateVelocityAndDirection(),this.collisionDetection(),this.drawEnemies(t),this.resetMoveDownTimer(),this.fireBullet()}collisionDetection(){this.enemyRows.forEach((t=>{t.forEach(((e,i)=>{this.playerBulletController.collideWith(e)&&(this.enemyDeathSound.restart(),t.splice(i,1))}))})),this.enemyRows=this.enemyRows.filter((t=>t.length>0))}fireBullet(){if(this.fireBulletTimer--,this.fireBulletTimer<=0){this.fireBulletTimer=this.fireBulletTimerDefault;const t=this.enemyRows.flat(),e=t[Math.floor(Math.random()*t.length)];this.enemyBulletController.shoot(e.x,e.y,-4)}}decrementMoveDownTimer(){this.currentDirection!==p.downLeft&&this.currentDirection!==p.downRight||this.moveDownTimer--}resetMoveDownTimer(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}updateVelocityAndDirection(){for(const t of this.enemyRows)if(this.currentDirection===p.right){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;const e=t[t.length-1];if(e.x&&e.x+e.width>=this.canvas.width){this.currentDirection=p.downLeft;break}}else if(this.currentDirection===p.downLeft){if(this.moveDown(p.left))break}else if(this.currentDirection===p.left){this.xVelocity=-this.defaultXVelocity,this.yVelocity=0;const e=t[0];if(e.x&&e.x<=0){this.currentDirection=p.downRight;break}}else if(this.currentDirection===p.downRight&&this.moveDown(p.right))break}moveDown(t){return this.xVelocity=0,this.yVelocity=this.defaultYVelocity,this.moveDownTimer<=0&&(this.currentDirection=t,!0)}drawEnemies(t){this.enemyRows.flat().forEach((e=>{e.move(this.xVelocity,this.yVelocity),e.draw(t)}))}createEnemies(){this.enemyMap.forEach(((t,e)=>{this.enemyRows[e]=[],t.forEach(((t,i)=>{t>0&&this.enemyRows[e].push(new m(i*A*f,e*b*y,t,A,b))}))}))}collideWith(t){return this.enemyRows.flat().some((e=>e.collideWith(t)))}}class C{constructor(e,i,o,n,s,r,a,l){t(this,"rightPressed",!1),t(this,"leftPressed",!1),t(this,"shootPressed",!1),t(this,"keydown",(t=>{"ArrowLeft"==t.code&&(this.leftPressed=!0),"ArrowRight"==t.code&&(this.rightPressed=!0),"Space"==t.code&&(this.shootPressed=!0)})),t(this,"keyup",(t=>{"ArrowLeft"==t.code&&(this.leftPressed=!1),"ArrowRight"==t.code&&(this.rightPressed=!1),"Space"==t.code&&(this.shootPressed=!1)})),t(this,"handleStart",(t=>{"leftArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),this.leftPressed=!0),"rightArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),this.rightPressed=!0),"fireButton"==t.target.id&&(t.preventDefault(),t.stopPropagation(),this.shootPressed=!0)})),t(this,"handleEnd",(t=>{"leftArrow"==t.target.id&&(this.leftPressed=!1),"rightArrow"==t.target.id&&(this.rightPressed=!1),"fireButton"==t.target.id&&(this.shootPressed=!1)})),this.canvas=e,this.velocity=i,this.bulletController=o,this.x=this.canvas.width/2-n/2,this.y=this.canvas.height-2*n,this.y<=this.canvas.height-75&&(this.y=this.canvas.height-75),this.width=n,this.height=s,this.image=new Image,this.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAwCAYAAABT9ym6AAAAAXNSR0IArs4c6QAAAktJREFUaEPtWTtOw0AQXYsaiYIOToCCrKRCouEUFByAT+OSCiiAitINnwNQcAoaJKqgiIgTQEeBRI0W2fGs5JGHt+t4Hds4TRR7Z2feezOzYydQnj+vYagHRxMVHKrApyuvmyeB6xulp9eh2pxMvPryunkCpFfEMQ97RWwJ62vElqlsnffUapwiSUCji1i9fERO4Mt2LVd/1kEN12I9Po2cD7ayirj6swbiyhCleGcUSZhNQLmmZOWKUCDR5XJKcnzynX6jwMiONx9bO1d/MLX+LRAOnCuCFC1LXOWKtBYIL2bzO9opPJuH8WOuxiT72muk80CIUVQjjVekNUCIaZ7L/LqkiK096nK0T+muZRtI64BQwMQgSi1+n+wkgtBEUJkijQEiTbfSSYtqwfEBz8xwtorweI0i0rTZVCA83kCaUjmjUneabqzklt7t/ViJsX+/lFs3ePvK/Zb8SZt3D4htl+HdpS5FUHxGEbRw0amF4psbCHdAuS/VinQfnSM9EOmAk5jjXQgpQvvTusYo0hggqPmjKdc3EBTf3OcIAVw4EIQUnfwciJTzfIbi3YvXiOv7MOvpVwLcGiAEQO+up68+g4f3FLz02oeYHW9fFWIfPR2n16XnEXru4P5Q5kBFugfkVs0UOZj9X45qZ3wWFStyHv9JrlGE+atOkc4A+dyaKbL6nEtHymVijGpIZ+s5k2Qv2ZlUFvyJzyNIMrRx64BIgHWWckaRrIYgAcDOlmDj19WAr+8MEMS8qKRjDSDCrc8RtBEVN28GdQH5BdBODwD0mTMTAAAAAElFTkSuQmCC",this.leftArrow=r,this.rightArrow=a,this.fireButton=l,this.deathSound=new Audio(c),this.deathSound.volume=.5,document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup),this.leftArrow.addEventListener("touchstart",this.handleStart),this.leftArrow.addEventListener("touchend",this.handleEnd),this.rightArrow.addEventListener("touchstart",this.handleStart),this.rightArrow.addEventListener("touchend",this.handleEnd),this.fireButton.addEventListener("touchstart",this.handleStart),this.fireButton.addEventListener("touchend",this.handleEnd)}draw(t){this.move(),this.collideWidthWalls(),this.shootPressed&&this.bulletController.shoot(this.x+this.width/2,this.y,4,10),t.drawImage(this.image,this.x,this.y,this.width,this.height)}move(){this.rightPressed?this.x+=this.velocity:this.leftPressed&&(this.x+=-this.velocity)}collideWidthWalls(){this.x<0&&(this.x=0),this.x>this.canvas.width-this.width&&(this.x=this.canvas.width-this.width)}}function I(){const t=document.querySelector("#game"),i=document.querySelector("#endGame"),o=document.querySelector("#start"),n=document.querySelector("#restart"),s=document.querySelector(".section__content"),r=t.getContext("2d"),a=document.querySelector("#leftArrow"),l=document.querySelector("#rightArrow"),h=document.querySelector("#fireButton"),c=document.querySelector("#controls");c.style.display="none";const m=window,u=document.getElementsByTagName("body")[0],w=m.innerWidth||u.clientWidth;let g=window.getComputedStyle(s,null),A=g.getPropertyValue("width"),b=g.getPropertyValue("height");t.width=parseInt(A),t.height=parseInt(b);let f=50,y=48;w<=1024&&(f*=.85,y*=.85),w<=768&&(t.height=.76*t.height,c.style.display="flex",o.style.top=parseInt(b)/2-(parseInt(b)-t.height)/2+"px",n.style.top=parseInt(b)/2-(parseInt(b)-t.height)/3.2+"px",i.style.top=parseInt(b)/2-(parseInt(b)-t.height)/1.4+"px"),w<=600&&(f*=.7,y*=.7),w<=400&&(f*=.7,y*=.7),w<=360&&(c.style.bottom="15px",o.style.top=parseInt(b)/2-(parseInt(b)-t.height)/2.2+"px",n.style.top=parseInt(b)/2-(parseInt(b)-t.height)/3.2+"px",i.style.top=parseInt(b)/2-(parseInt(b)-t.height)/1.4+"px");const x=new Image;function v(e){let i=Math.max(t.width/e.width,t.height/e.height),o=t.width/2-e.width/2*i,n=t.height/2-e.height/2*i;r.drawImage(e,o,n,e.width*i,e.height*i)}x.src=e,x.onload=function(){v(this)};const I=new d(t,20,"lime",!0),E=new C(t,4,I,f,y,a,l,h),z=new d(t,4,"red",!1),W=new k(t,z,I);let R=!1,T=!1,B=0;function S(){v(x),function(){if(R)return;z.collideWith(E)&&(E.deathSound.currentTime=0,E.deathSound.play(),R=!0);W.collideWith(E)&&(E.deathSound.currentTime=0,E.deathSound.play(),R=!0);0===W.enemyRows.length&&(T=!0,R=!0)}(),R&&(clearInterval(B),n.style.display="block",i.style.display="block",i.textContent=T?"YOU WIN!":"GAME OVER"),R||(W.draw(r),E.draw(r),I.draw(r),z.draw(r))}function V(){B=setInterval(S,1e3/60)}o.addEventListener("click",(function(){o.style.display="none",R=!1,T=!1,V()})),n.addEventListener("click",(function(){n.style.display="none",i.style.display="none",R=!1,T=!1,function(){r.clearRect(0,0,t.width,t.height),E.x=t.width/2-f/2,E.y=t.height-2*E.width,E.y<=t.height-75&&(E.y=t.height-75);W.createEnemies(),W.currentDirection=p.right,z.bullets=[],z.timeTillNextBulletAllowed=0,I.bullets=[],I.timeTillNextBulletAllowed=0}(),clearInterval(B),V()}))}window.addEventListener("DOMContentLoaded",(()=>{I()}))}}}))}();

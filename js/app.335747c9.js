!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);var n=i.p+"public/images/space2.png",r=i.p+"public/images/player.png",o=i.p+"public/sounds/enemy-death.wav";function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=function(){function e(t,i,n,l,h){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"rightPressed",!1),s(this,"leftPressed",!1),s(this,"shootPressed",!1),s(this,"keydown",(function(e){"ArrowRight"==e.code&&(a.rightPressed=!0),"ArrowLeft"==e.code&&(a.leftPressed=!0),"Space"==e.code&&(a.shootPressed=!0)})),s(this,"keyup",(function(e){"ArrowRight"==e.code&&(a.rightPressed=!1),"ArrowLeft"==e.code&&(a.leftPressed=!1),"Space"==e.code&&(a.shootPressed=!1)})),this.canvas=t,this.velocity=i,this.bulletController=n,this.x=this.canvas.width/2-l/2,this.y=this.canvas.height-2*l,this.y<=this.canvas.height-75&&(this.y=this.canvas.height-75),this.width=l,this.height=h,this.image=new Image,this.image.src=r,this.deathSound=new Audio(o),this.deathSound.volume=.5,document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup)}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){this.move(),this.collideWidthWalls(),this.shootPressed&&this.bulletController.shoot(this.x+this.width/2,this.y,4,10),e.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(){this.rightPressed?this.x+=this.velocity:this.leftPressed&&(this.x+=-this.velocity)}},{key:"collideWidthWalls",value:function(){this.x<0&&(this.x=0),this.x>this.canvas.width-this.width&&(this.x=this.canvas.width-this.width)}}])&&l(t.prototype,i),n&&l(t,n),e}(),a={left:0,right:1,downLeft:2,downRight:3},u=i.p+"public/images/enemy1.png",c=i.p+"public/images/enemy2.png",d=i.p+"public/images/enemy3.png";function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(t,i,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i,this.width=r,this.height=o,this.image=new Image,1===n?this.image.src=u:2===n?this.image.src=c:3===n&&(this.image.src=d)}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(e,t){this.x+=e,this.y+=t}},{key:"collideWith",value:function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height}}])&&f(t.prototype,i),n&&f(t,n),e}();function m(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=window,b=document.getElementsByTagName("body")[0],x=p.innerWidth||b.clientWidth,T=44,D=32,k=1.36,S=1.36,E=1.6,A=1;x<1024&&(T*=.85,D*=.85),x<600&&(T*=.7,D*=.7,k*=1.1,S*=1,E=1,A=.7),x<425&&(T*=.55,D*=.55,k*=1.2,S*=1.1,E=.9,A=.6);var P=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"enemyMap",[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,3,3,3,3,2,2,2],[2,2,2,3,3,3,3,2,2,2],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]]),g(this,"enemyRows",[]),g(this,"currentDirection",a.right),g(this,"xVelocity",0),g(this,"yVelocity",0),g(this,"defaultXVelocity",E),g(this,"defaultYVelocity",A),g(this,"moveDownTimerDefault",32),g(this,"moveDownTimer",this.moveDownTimerDefault),g(this,"fireBulletTimerDefault",100),g(this,"fireBulletTimer",this.fireBulletTimerDefault),this.canvas=t,this.enemyBulletController=i,this.playerBulletController=n,this.enemyDeathSound=new Audio(o),this.enemyDeathSound.volume=.5,this.createEnemies()}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){this.decrementMoveDownTimer(),this.updateVelocityAndDirection(),this.collisionDetection(),this.drawEnemies(e),this.resetMoveDownTimer(),this.fireBullet()}},{key:"collisionDetection",value:function(){var e=this;this.enemyRows.forEach((function(t){t.forEach((function(i,n){e.playerBulletController.collideWith(i)&&(e.enemyDeathSound.currentTime=0,e.enemyDeathSound.play(),t.splice(n,1))}))})),this.enemyRows=this.enemyRows.filter((function(e){return e.length>0}))}},{key:"fireBullet",value:function(){if(this.fireBulletTimer--,this.fireBulletTimer<=0){this.fireBulletTimer=this.fireBulletTimerDefault;var e=this.enemyRows.flat(),t=e[Math.floor(Math.random()*e.length)];this.enemyBulletController.shoot(t.x,t.y,-4)}}},{key:"decrementMoveDownTimer",value:function(){this.currentDirection!==a.downLeft&&this.currentDirection!==a.downRight||this.moveDownTimer--}},{key:"resetMoveDownTimer",value:function(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}},{key:"updateVelocityAndDirection",value:function(){var e,t=m(this.enemyRows);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(this.currentDirection===a.right){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;var n=i[i.length-1];if(n.x&&n.x+n.width>=this.canvas.width){this.currentDirection=a.downLeft;break}}else if(this.currentDirection===a.downLeft){if(this.moveDown(a.left))break}else if(this.currentDirection===a.left){this.xVelocity=-this.defaultXVelocity,this.yVelocity=0;var r=i[0];if(r.x&&r.x<=0){this.currentDirection=a.downRight;break}}else if(this.currentDirection===a.downRight&&this.moveDown(a.right))break}}catch(e){t.e(e)}finally{t.f()}}},{key:"moveDown",value:function(e){return this.xVelocity=0,this.yVelocity=this.defaultYVelocity,this.moveDownTimer<=0&&(this.currentDirection=e,!0)}},{key:"drawEnemies",value:function(e){var t=this;this.enemyRows.flat().forEach((function(i){i.move(t.xVelocity,t.yVelocity),i.draw(e)}))}},{key:"createEnemies",value:function(){var e=this;this.enemyMap.forEach((function(t,i){e.enemyRows[i]=[],t.forEach((function(t,n){t>0&&e.enemyRows[i].push(new y(n*T*k,i*D*S,t,T,D))}))}))}},{key:"collideWith",value:function(e){return this.enemyRows.flat().some((function(t){return t.collideWith(e)}))}}])&&v(t.prototype,i),n&&v(t,n),e}();function B(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(t,i,n,r,o,l,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.x=i-l/2,this.y=n,this.velocity=r,this.bulletColor=o,this.width=l,this.height=s}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){this.y-=this.velocity,e.fillStyle=this.bulletColor,e.fillRect(this.x,this.y,this.width,this.height)}},{key:"collideWith",value:function(e){return this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height>e.y&&this.y<e.y+e.height}}])&&B(t.prototype,i),n&&B(t,n),e}(),O=i.p+"public/sounds/shoot.wav";function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var W=window,j=document.getElementsByTagName("body")[0],I=W.innerWidth||j.clientWidth,M=5,L=20;I<1024&&(M*=.85,L*=.85),I<600&&(M*=.75,L*=.75,1.1),I<425&&(M*=.7,L*=.7,1.2);var N=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"bullets",[]),V(this,"timeTillNextBulletAllowed",0),this.canvas=t,this.maxBulletsAtATime=i,this.bulletColor=n,this.soundEnabled=r,this.shootSound=new Audio(O),this.shootSound.volume=.5}var t,i,n;return t=e,(i=[{key:"draw",value:function(e){var t=this;this.bullets=this.bullets.filter((function(e){return e.y+e.width>0&&e.y<=t.canvas.height})),this.bullets.forEach((function(t){return t.draw(e)})),this.timeTillNextBulletAllowed>0&&this.timeTillNextBulletAllowed--}},{key:"collideWith",value:function(e){var t=this.bullets.findIndex((function(t){return t.collideWith(e)}));if(t>=0)return this.bullets.splice(t,1),!0}},{key:"shoot",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.timeTillNextBulletAllowed<=0&&this.bullets.length<this.maxBulletsAtATime){var r=new C(this.canvas,e,t,i,this.bulletColor,M,L);this.bullets.push(r),this.soundEnabled&&(this.shootSound.currentTime=0,this.shootSound.play()),this.timeTillNextBulletAllowed=n}}}])&&R(t.prototype,i),n&&R(t,n),e}();function _(){var e=document.querySelector("#game"),t=document.querySelector("#endGame"),i=document.querySelector("#start"),r=document.querySelector("#restart"),o=document.querySelector(".section__content"),l=e.getContext("2d"),s=window,u=document.getElementsByTagName("body")[0],c=s.innerWidth||u.clientWidth,d=50,f=48;c<1024&&(d*=.85,f*=.85),c<600&&(d*=.7,f*=.7),c<400&&(d*=.7,f*=.7);var y=window.getComputedStyle(o,null),m=y.getPropertyValue("width"),w=y.getPropertyValue("height");e.width=parseInt(m),e.height=parseInt(w);var v=new Image;function g(t){var i=Math.max(e.width/t.width,e.height/t.height),n=e.width/2-t.width/2*i,r=e.height/2-t.height/2*i;l.drawImage(t,n,r,t.width*i,t.height*i)}v.src=n,v.onload=function(){g(this)};var p=new N(e,20,"lime",!0),b=new h(e,4,p,d,f),x=new N(e,4,"red",!1),T=new P(e,x,p),D=!1,k=!1,S=0;function E(){g(v),function(){if(D)return;x.collideWith(b)&&(b.deathSound.currentTime=0,b.deathSound.play(),D=!0);T.collideWith(b)&&(b.deathSound.currentTime=0,b.deathSound.play(),D=!0);0===T.enemyRows.length&&(k=!0,D=!0)}(),D&&(clearInterval(S),r.style.display="block",t.style.display="block",t.textContent=k?"YOU WIN!":"GAME OVER"),D||(T.draw(l),b.draw(l),p.draw(l),x.draw(l))}function A(){S=setInterval(E,1e3/60)}r.addEventListener("click",(function(){r.style.display="none",t.style.display="none",D=!1,k=!1,function(){l.clearRect(0,0,e.width,e.height),b.x=e.width/2-d/2,b.y=e.height-2*b.width,b.y<=e.height-75&&(b.y=e.height-75);T.createEnemies(),T.currentDirection=a.right,x.bullets=[],x.timeTillNextBulletAllowed=0,p.bullets=[],p.timeTillNextBulletAllowed=0}(),clearInterval(S),A()})),i.addEventListener("click",(function(){i.style.display="none",D=!1,k=!1,A()}))}window.addEventListener("DOMContentLoaded",(function(){_()}))}]);
//# sourceMappingURL=app.335747c9.js.map
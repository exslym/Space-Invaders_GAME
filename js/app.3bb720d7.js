!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);var n=i.p+"public/images/space2.png",o=i.p+"public/sounds/shoot.wav",r=i.p+"public/images/player.png",s=i.p+"public/sounds/enemy-death.wav";function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function(){function t(e,i,n,o,h,l,u,d){var c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"rightPressed",!1),a(this,"leftPressed",!1),a(this,"shootPressed",!1),a(this,"keydown",(function(t){"ArrowLeft"==t.code&&(c.leftPressed=!0),"ArrowRight"==t.code&&(c.rightPressed=!0),"Space"==t.code&&(c.shootPressed=!0)})),a(this,"keyup",(function(t){"ArrowLeft"==t.code&&(c.leftPressed=!1),"ArrowRight"==t.code&&(c.rightPressed=!1),"Space"==t.code&&(c.shootPressed=!1)})),a(this,"handleStart",(function(t){"leftArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),c.leftPressed=!0),"rightArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),c.rightPressed=!0),"fireButton"==t.target.id&&(t.preventDefault(),t.stopPropagation(),c.shootPressed=!0)})),a(this,"handleEnd",(function(t){"leftArrow"==t.target.id&&(c.leftPressed=!1),"rightArrow"==t.target.id&&(c.rightPressed=!1),"fireButton"==t.target.id&&(c.shootPressed=!1)})),this.canvas=e,this.velocity=i,this.bulletController=n,this.x=this.canvas.width/2-o/2,this.y=this.canvas.height-2*o,this.y<=this.canvas.height-75&&(this.y=this.canvas.height-75),this.width=o,this.height=h,this.image=new Image,this.image.src=r,this.leftArrow=l,this.rightArrow=u,this.fireButton=d,this.deathSound=new Audio(s),this.deathSound.volume=.5,document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup),this.leftArrow.addEventListener("touchstart",this.handleStart),this.leftArrow.addEventListener("touchend",this.handleEnd),this.rightArrow.addEventListener("touchstart",this.handleStart),this.rightArrow.addEventListener("touchend",this.handleEnd),this.fireButton.addEventListener("touchstart",this.handleStart),this.fireButton.addEventListener("touchend",this.handleEnd)}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){this.move(),this.collideWidthWalls(),this.shootPressed&&this.bulletController.shoot(this.x+this.width/2,this.y,4,10),t.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(){this.rightPressed?this.x+=this.velocity:this.leftPressed&&(this.x+=-this.velocity)}},{key:"collideWidthWalls",value:function(){this.x<0&&(this.x=0),this.x>this.canvas.width-this.width&&(this.x=this.canvas.width-this.width)}}])&&h(e.prototype,i),n&&h(e,n),t}(),u={left:0,right:1,downLeft:2,downRight:3},d=i.p+"public/images/enemy1.png",c=i.p+"public/images/enemy2.png",f=i.p+"public/images/enemy3.png";function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var w=function(){function t(e,i,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=o,this.height=r,this.image=new Image,1===n?this.image.src=d:2===n?this.image.src=c:3===n&&(this.image.src=f)}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"collideWith",value:function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}])&&y(e.prototype,i),n&&y(e,n),t}(),p=i.p+"public/sounds/enemy-death1.wav",m=i.p+"public/sounds/enemy-death2.wav",v=i.p+"public/sounds/enemy-death3.wav",g=i.p+"public/sounds/enemy-death4.wav",b=i.p+"public/sounds/enemy-death5.wav",S=i.p+"public/sounds/enemy-death6.wav",A=i.p+"public/sounds/enemy-death7.wav",x=i.p+"public/sounds/enemy-death8.wav",k=i.p+"public/sounds/enemy-death9.wav",T=i.p+"public/sounds/enemy-death10.wav";function E(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return D(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,h=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){h=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(h)throw r}}}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var B=window,R=document.getElementsByTagName("body")[0],C=B.innerWidth||R.clientWidth,L=44,M=32,O=1.36,V=1.36,W=1.6,j=1;C<=1024&&(L*=.85,M*=.85),C<=600&&(L*=.7,M*=.7,O*=1.1,V*=1,W=1,j=.7),C<=425&&(L*=.55,M*=.55,O*=1.2,V*=1.1,W=.9,j=.6);var N=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,"enemyMap",[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,3,3,3,3,2,2,2],[2,2,2,3,3,3,3,2,2,2],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]]),I(this,"enemyRows",[]),I(this,"currentDirection",u.right),I(this,"xVelocity",0),I(this,"yVelocity",0),I(this,"defaultXVelocity",W),I(this,"defaultYVelocity",j),I(this,"moveDownTimerDefault",32),I(this,"moveDownTimer",this.moveDownTimerDefault),I(this,"fireBulletTimerDefault",100),I(this,"fireBulletTimer",this.fireBulletTimerDefault),I(this,"copyArray",[]),this.canvas=e,this.enemyBulletController=i,this.playerBulletController=n,this.createEnemies(),this.deathSound1=new Audio(p),this.deathSound2=new Audio(m),this.deathSound3=new Audio(v),this.deathSound4=new Audio(g),this.deathSound5=new Audio(b),this.deathSound6=new Audio(S),this.deathSound7=new Audio(A),this.deathSound8=new Audio(x),this.deathSound9=new Audio(k),this.deathSound10=new Audio(T),this.sounds=[this.deathSound1,this.deathSound2,this.deathSound3,this.deathSound4,this.deathSound5,this.deathSound6,this.deathSound7,this.deathSound8,this.deathSound9,this.deathSound10],this.sounds.forEach((function(t){t.volume=.5}))}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){this.decrementMoveDownTimer(),this.updateVelocityAndDirection(),this.collisionDetection(),this.drawEnemies(t),this.resetMoveDownTimer(),this.fireBullet()}},{key:"getRandomItem",value:function(t){if(0===this.copyArray.length)for(var e=0;e<t.length;e++)this.copyArray.push(e);var i=Math.floor(Math.random()*this.copyArray.length),n=this.copyArray[i];return this.copyArray.splice(i,1),this.item=t[n],this.item}},{key:"collisionDetection",value:function(){var t=this;this.enemyRows.forEach((function(e){e.forEach((function(i,n){if(t.playerBulletController.collideWith(i)){var o=t.getRandomItem(t.sounds);o.currentTime=0,o.play(),e.splice(n,1)}}))})),this.enemyRows=this.enemyRows.filter((function(t){return t.length>0}))}},{key:"fireBullet",value:function(){if(this.fireBulletTimer--,this.fireBulletTimer<=0){this.fireBulletTimer=this.fireBulletTimerDefault;var t=this.enemyRows.flat(),e=t[Math.floor(Math.random()*t.length)];this.enemyBulletController.shoot(e.x,e.y,-4)}}},{key:"decrementMoveDownTimer",value:function(){this.currentDirection!==u.downLeft&&this.currentDirection!==u.downRight||this.moveDownTimer--}},{key:"resetMoveDownTimer",value:function(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}},{key:"updateVelocityAndDirection",value:function(){var t,e=E(this.enemyRows);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(this.currentDirection===u.right){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;var n=i[i.length-1];if(n.x&&n.x+n.width>=this.canvas.width){this.currentDirection=u.downLeft;break}}else if(this.currentDirection===u.downLeft){if(this.moveDown(u.left))break}else if(this.currentDirection===u.left){this.xVelocity=-this.defaultXVelocity,this.yVelocity=0;var o=i[0];if(o.x&&o.x<=0){this.currentDirection=u.downRight;break}}else if(this.currentDirection===u.downRight&&this.moveDown(u.right))break}}catch(t){e.e(t)}finally{e.f()}}},{key:"moveDown",value:function(t){return this.xVelocity=0,this.yVelocity=this.defaultYVelocity,this.moveDownTimer<=0&&(this.currentDirection=t,!0)}},{key:"drawEnemies",value:function(t){var e=this;this.enemyRows.flat().forEach((function(i){i.move(e.xVelocity,e.yVelocity),i.draw(t)}))}},{key:"createEnemies",value:function(){var t=this;this.enemyMap.forEach((function(e,i){t.enemyRows[i]=[],e.forEach((function(e,n){e>0&&t.enemyRows[i].push(new w(n*L*O,i*M*V,e,L,M))}))}))}},{key:"collideWith",value:function(t){return this.enemyRows.flat().some((function(e){return e.collideWith(t)}))}}])&&P(e.prototype,i),n&&P(e,n),t}();function q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _=function(){function t(e,i,n,o,r,s,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.x=i-s/2,this.y=n,this.velocity=o,this.bulletColor=r,this.width=s,this.height=h}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){this.y-=this.velocity,t.fillStyle=this.bulletColor,t.fillRect(this.x,this.y,this.width,this.height)}},{key:"collideWith",value:function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}])&&q(e.prototype,i),n&&q(e,n),t}(),X=i.p+"public/sounds/shoot1.wav",Y=i.p+"public/sounds/shoot2.wav",G=i.p+"public/sounds/shoot3.wav",U=i.p+"public/sounds/shoot4.wav",$=i.p+"public/sounds/shoot5.wav",z=i.p+"public/sounds/shoot6.wav",F=i.p+"public/sounds/shoot7.wav",H=i.p+"public/sounds/shoot8.wav",J=i.p+"public/sounds/shoot9.wav",K=i.p+"public/sounds/shoot10.wav";function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tt=window,et=document.getElementsByTagName("body")[0],it=tt.innerWidth||et.clientWidth,nt=5,ot=20;it<=1024&&(nt*=.85,ot*=.85),it<=600&&(nt*=.75,ot*=.75,1.1),it<=425&&(nt*=.7,ot*=.7,1.2);var rt=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"bullets",[]),Z(this,"timeTillNextBulletAllowed",0),Z(this,"copyArray",[]),this.canvas=e,this.maxBulletsAtATime=i,this.bulletColor=n,this.soundEnabled=o,this.shootSound1=new Audio(X),this.shootSound2=new Audio(Y),this.shootSound3=new Audio(G),this.shootSound4=new Audio(U),this.shootSound5=new Audio($),this.shootSound6=new Audio(z),this.shootSound7=new Audio(F),this.shootSound8=new Audio(H),this.shootSound9=new Audio(J),this.shootSound10=new Audio(K),this.sounds=[this.shootSound1,this.shootSound2,this.shootSound3,this.shootSound4,this.shootSound5,this.shootSound6,this.shootSound7,this.shootSound8,this.shootSound9,this.shootSound10],this.sounds.forEach((function(t){t.volume=.5}))}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){var e=this;this.bullets=this.bullets.filter((function(t){return t.y+t.width>0&&t.y<=e.canvas.height})),this.bullets.forEach((function(e){return e.draw(t)})),this.timeTillNextBulletAllowed>0&&this.timeTillNextBulletAllowed--}},{key:"collideWith",value:function(t){var e=this.bullets.findIndex((function(e){return e.collideWith(t)}));if(e>=0)return this.bullets.splice(e,1),!0}},{key:"getRandomItem",value:function(t){if(0===this.copyArray.length)for(var e=0;e<t.length;e++)this.copyArray.push(e);var i=Math.floor(Math.random()*this.copyArray.length),n=this.copyArray[i];return this.copyArray.splice(i,1),this.item=t[n],this.item}},{key:"shoot",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.timeTillNextBulletAllowed<=0&&this.bullets.length<this.maxBulletsAtATime){var o=new _(this.canvas,t,e,i,this.bulletColor,nt,ot);if(this.bullets.push(o),this.soundEnabled){var r=this.getRandomItem(this.sounds);r.currentTime=0,r.play()}this.timeTillNextBulletAllowed=n}}}])&&Q(e.prototype,i),n&&Q(e,n),t}();function st(){var t=document.querySelector("#game"),e=document.querySelector("#endGame"),i=document.querySelector("#start"),r=document.querySelector("#restart"),s=document.querySelector(".section__content"),h=t.getContext("2d"),a=document.querySelector("#leftArrow"),d=document.querySelector("#rightArrow"),c=document.querySelector("#fireButton"),f=document.querySelector("#controls");f.style.display="none";var y=new Audio(o);y.volume=.5;var w=function t(){i.removeEventListener("click",t),r.removeEventListener("click",t),y.currentTime=0,y.play()},p=window,m=document.getElementsByTagName("body")[0],v=p.innerWidth||m.clientWidth,g=window.getComputedStyle(s,null),b=g.getPropertyValue("width"),S=g.getPropertyValue("height");t.width=parseInt(b),t.height=parseInt(S);var A=50,x=48;v<=1024&&(A*=.85,x*=.85),v<=768&&(t.height=.76*t.height,f.style.display="flex",i.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/2,"px"),r.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/3.2,"px"),e.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/1.4,"px")),v<=600&&(A*=.7,x*=.7),v<=400&&(A*=.7,x*=.7),v<=360&&(f.style.bottom="15px",i.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/2.2,"px"),r.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/3.2,"px"),e.style.top="".concat(parseInt(S)/2-(parseInt(S)-t.height)/1.4,"px"));var k=new Image;function T(e){var i=Math.max(t.width/e.width,t.height/e.height),n=t.width/2-e.width/2*i,o=t.height/2-e.height/2*i;h.drawImage(e,n,o,e.width*i,e.height*i)}k.src=n,k.onload=function(){T(this)};var E=new rt(t,20,"lime",!0),D=new l(t,4,E,A,x,a,d,c),P=new rt(t,4,"red",!1),I=new N(t,P,E),B=!1,R=!1,C=0;function L(){T(k),function(){if(B)return;P.collideWith(D)&&(D.deathSound.currentTime=0,D.deathSound.play(),B=!0);I.collideWith(D)&&(D.deathSound.currentTime=0,D.deathSound.play(),B=!0);0===I.enemyRows.length&&(R=!0,B=!0)}(),B&&(clearInterval(C),r.style.display="block",e.style.display="block",e.textContent=R?"YOU WIN!":"GAME OVER"),B||(I.draw(h),D.draw(h),E.draw(h),P.draw(h))}function M(){C=setInterval(L,1e3/60)}r.addEventListener("click",(function(){r.style.display="none",e.style.display="none",B=!1,R=!1,function(){h.clearRect(0,0,t.width,t.height),D.x=t.width/2-A/2,D.y=t.height-2*D.width,D.y<=t.height-75&&(D.y=t.height-75);I.createEnemies(),I.currentDirection=u.right,P.bullets=[],P.timeTillNextBulletAllowed=0,E.bullets=[],E.timeTillNextBulletAllowed=0}(),clearInterval(C),M(),w()})),i.addEventListener("click",(function(){i.style.display="none",B=!1,R=!1,M(),w()}))}window.addEventListener("DOMContentLoaded",(function(){st()}))}]);
//# sourceMappingURL=app.3bb720d7.js.map
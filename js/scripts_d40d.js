!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var n=i.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"}();var e=t.p+"public/sounds/shoot.wav",i=t.p+"public/images/space2.png",n=t.p+"public/images/player.png",r=t.p+"public/sounds/enemy-death.wav";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function s(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===o(e)?e:String(e)}var h=function(){function t(e,i,o,l,a,h,u,c){var f=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"rightPressed",!1),s(this,"leftPressed",!1),s(this,"shootPressed",!1),s(this,"keydown",(function(t){"ArrowLeft"==t.code&&(f.leftPressed=!0),"ArrowRight"==t.code&&(f.rightPressed=!0),"Space"==t.code&&(f.shootPressed=!0)})),s(this,"keyup",(function(t){"ArrowLeft"==t.code&&(f.leftPressed=!1),"ArrowRight"==t.code&&(f.rightPressed=!1),"Space"==t.code&&(f.shootPressed=!1)})),s(this,"handleStart",(function(t){"leftArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),f.leftPressed=!0),"rightArrow"==t.target.id&&(t.preventDefault(),t.stopPropagation(),f.rightPressed=!0),"fireButton"==t.target.id&&(t.preventDefault(),t.stopPropagation(),f.shootPressed=!0)})),s(this,"handleEnd",(function(t){"leftArrow"==t.target.id&&(f.leftPressed=!1),"rightArrow"==t.target.id&&(f.rightPressed=!1),"fireButton"==t.target.id&&(f.shootPressed=!1)})),this.canvas=e,this.velocity=i,this.bulletController=o,this.x=this.canvas.width/2-l/2,this.y=this.canvas.height-2*l,this.y<=this.canvas.height-75&&(this.y=this.canvas.height-75),this.width=l,this.height=a,this.image=new Image,this.image.src=n,this.leftArrow=h,this.rightArrow=u,this.fireButton=c,this.deathSound=new Audio(r),this.deathSound.volume=.5,document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup),this.leftArrow.addEventListener("touchstart",this.handleStart),this.leftArrow.addEventListener("touchend",this.handleEnd),this.rightArrow.addEventListener("touchstart",this.handleStart),this.rightArrow.addEventListener("touchend",this.handleEnd),this.fireButton.addEventListener("touchstart",this.handleStart),this.fireButton.addEventListener("touchend",this.handleEnd)}var e,i;return e=t,(i=[{key:"draw",value:function(t){this.move(),this.collideWidthWalls(),this.shootPressed&&this.bulletController.shoot(this.x+this.width/2,this.y,4,10),t.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(){this.rightPressed?this.x+=this.velocity:this.leftPressed&&(this.x+=-this.velocity)}},{key:"collideWidthWalls",value:function(){this.x<0&&(this.x=0),this.x>this.canvas.width-this.width&&(this.x=this.canvas.width-this.width)}}])&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={left:0,right:1,downLeft:2,downRight:3},c=t.p+"public/images/enemy1.png",f=t.p+"public/images/enemy2.png",y=t.p+"public/images/enemy3.png";function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(r)?r:String(r)),n)}var r}var p=function(){function t(e,i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=r,this.height=o,this.image=new Image,1===n?this.image.src=c:2===n?this.image.src=f:3===n&&(this.image.src=y)}var e,i;return e=t,(i=[{key:"draw",value:function(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"collideWith",value:function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}])&&m(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function b(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function g(t,e,i){return(e=S(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function S(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===v(e)?e:String(e)}var x=window,T=document.getElementsByTagName("body")[0],P=x.innerWidth||T.clientWidth,E=44,A=32,D=1.36,k=1.36,B=1.6,j=1;P<=1024&&(E*=.85,A*=.85),P<=600&&(E*=.7,A*=.7,D*=1.1,k*=1,B=1,j=.7),P<=425&&(E*=.55,A*=.55,D*=1.2,k*=1.1,B=.9,j=.6),Audio.prototype.stop=function(){this.pause(),this.currentTime=0},Audio.prototype.restart=function(){this.pause(),this.currentTime=0,this.play()};var I=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"enemyMap",[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,3,3,3,3,2,2,2],[2,2,2,3,3,3,3,2,2,2],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]]),g(this,"enemyRows",[]),g(this,"currentDirection",u.right),g(this,"xVelocity",0),g(this,"yVelocity",0),g(this,"defaultXVelocity",B),g(this,"defaultYVelocity",j),g(this,"moveDownTimerDefault",32),g(this,"moveDownTimer",this.moveDownTimerDefault),g(this,"fireBulletTimerDefault",100),g(this,"fireBulletTimer",this.fireBulletTimerDefault),this.canvas=e,this.enemyBulletController=i,this.playerBulletController=n,this.createEnemies(),this.enemyDeathSound=new Audio(r),this.enemyDeathSound.volume=.5}var e,i;return e=t,(i=[{key:"draw",value:function(t){this.decrementMoveDownTimer(),this.updateVelocityAndDirection(),this.collisionDetection(),this.drawEnemies(t),this.resetMoveDownTimer(),this.fireBullet()}},{key:"collisionDetection",value:function(){var t=this;this.enemyRows.forEach((function(e){e.forEach((function(i,n){t.playerBulletController.collideWith(i)&&(t.enemyDeathSound.restart(),e.splice(n,1))}))})),this.enemyRows=this.enemyRows.filter((function(t){return t.length>0}))}},{key:"fireBullet",value:function(){if(this.fireBulletTimer--,this.fireBulletTimer<=0){this.fireBulletTimer=this.fireBulletTimerDefault;var t=this.enemyRows.flat(),e=t[Math.floor(Math.random()*t.length)];this.enemyBulletController.shoot(e.x,e.y,-4)}}},{key:"decrementMoveDownTimer",value:function(){this.currentDirection!==u.downLeft&&this.currentDirection!==u.downRight||this.moveDownTimer--}},{key:"resetMoveDownTimer",value:function(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}},{key:"updateVelocityAndDirection",value:function(){var t,e=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return w(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return l=t.done,t},e:function(t){s=!0,o=t},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw o}}}}(this.enemyRows);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(this.currentDirection===u.right){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;var n=i[i.length-1];if(n.x&&n.x+n.width>=this.canvas.width){this.currentDirection=u.downLeft;break}}else if(this.currentDirection===u.downLeft){if(this.moveDown(u.left))break}else if(this.currentDirection===u.left){this.xVelocity=-this.defaultXVelocity,this.yVelocity=0;var r=i[0];if(r.x&&r.x<=0){this.currentDirection=u.downRight;break}}else if(this.currentDirection===u.downRight&&this.moveDown(u.right))break}}catch(t){e.e(t)}finally{e.f()}}},{key:"moveDown",value:function(t){return this.xVelocity=0,this.yVelocity=this.defaultYVelocity,this.moveDownTimer<=0&&(this.currentDirection=t,!0)}},{key:"drawEnemies",value:function(t){var e=this;this.enemyRows.flat().forEach((function(i){i.move(e.xVelocity,e.yVelocity),i.draw(t)}))}},{key:"createEnemies",value:function(){var t=this;this.enemyMap.forEach((function(e,i){t.enemyRows[i]=[],e.forEach((function(e,n){e>0&&t.enemyRows[i].push(new p(n*E*D,i*A*k,e,E,A))}))}))}},{key:"collideWith",value:function(t){return this.enemyRows.flat().some((function(e){return e.collideWith(t)}))}}])&&b(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function R(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==C(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===C(r)?r:String(r)),n)}var r}var V=function(){function t(e,i,n,r,o,l,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.x=i-l/2,this.y=n,this.velocity=r,this.bulletColor=o,this.width=l,this.height=s}var e,i;return e=t,(i=[{key:"draw",value:function(t){this.y-=this.velocity,t.fillStyle=this.bulletColor,t.fillRect(this.x,this.y,this.width,this.height)}},{key:"collideWith",value:function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}])&&R(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function L(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M(n.key),n)}}function O(t,e,i){return(e=M(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function M(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===W(e)?e:String(e)}var N=window,q=document.getElementsByTagName("body")[0],$=N.innerWidth||q.clientWidth,X=5,Y=20;$<=1024&&(X*=.85,Y*=.85),$<=600&&(X*=.75,Y*=.75),$<=425&&(X*=.7,Y*=.7),Audio.prototype.stop=function(){this.pause(),this.currentTime=0},Audio.prototype.restart=function(){this.pause(),this.currentTime=0,this.play()};var G=function(){function t(i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,"bullets",[]),O(this,"timeTillNextBulletAllowed",0),this.canvas=i,this.maxBulletsAtATime=n,this.bulletColor=r,this.soundEnabled=o,this.shootSound=new Audio(e),this.shootSound.volume=.5}var i,n;return i=t,n=[{key:"draw",value:function(t){var e=this;this.bullets=this.bullets.filter((function(t){return t.y+t.width>0&&t.y<=e.canvas.height})),this.bullets.forEach((function(e){return e.draw(t)})),this.timeTillNextBulletAllowed>0&&this.timeTillNextBulletAllowed--}},{key:"collideWith",value:function(t){var e=this.bullets.findIndex((function(e){return e.collideWith(t)}));if(e>=0)return this.bullets.splice(e,1),!0}},{key:"shoot",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.timeTillNextBulletAllowed<=0&&this.bullets.length<this.maxBulletsAtATime){var r=new V(this.canvas,t,e,i,this.bulletColor,X,Y);this.bullets.push(r),this.soundEnabled&&this.shootSound.restart(),this.timeTillNextBulletAllowed=n}}}],n&&L(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();window.addEventListener("DOMContentLoaded",(function(){!function(){var t=document.querySelector("#game"),e=document.querySelector("#endGame"),n=document.querySelector("#start"),r=document.querySelector("#restart"),o=document.querySelector(".section__content"),l=t.getContext("2d"),s=document.querySelector("#leftArrow"),a=document.querySelector("#rightArrow"),c=document.querySelector("#fireButton"),f=document.querySelector("#controls");f.style.display="none";var y=window,d=document.getElementsByTagName("body")[0],m=y.innerWidth||d.clientWidth,p=window.getComputedStyle(o,null),v=p.getPropertyValue("width"),w=p.getPropertyValue("height");t.width=parseInt(v),t.height=parseInt(w);var b=50,g=48;m<=1024&&(b*=.85,g*=.85),m<=768&&(t.height=.76*t.height,f.style.display="flex",n.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/2,"px"),r.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/3.2,"px"),e.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/1.4,"px")),m<=600&&(b*=.7,g*=.7),m<=400&&(b*=.7,g*=.7),m<=360&&(f.style.bottom="15px",n.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/2.2,"px"),r.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/3.2,"px"),e.style.top="".concat(parseInt(w)/2-(parseInt(w)-t.height)/1.4,"px"));var S=new Image;function x(e){var i=Math.max(t.width/e.width,t.height/e.height),n=t.width/2-e.width/2*i,r=t.height/2-e.height/2*i;l.drawImage(e,n,r,e.width*i,e.height*i)}S.src=i,S.onload=function(){x(this)};var T=new G(t,20,"lime",!0),P=new h(t,4,T,b,g,s,a,c),E=new G(t,4,"red",!1),A=new I(t,E,T),D=!1,k=!1,B=0;function j(){x(S),D||(E.collideWith(P)&&(P.deathSound.currentTime=0,P.deathSound.play(),D=!0),A.collideWith(P)&&(P.deathSound.currentTime=0,P.deathSound.play(),D=!0),0===A.enemyRows.length&&(k=!0,D=!0)),D&&(clearInterval(B),r.style.display="block",e.style.display="block",e.textContent=k?"YOU WIN!":"GAME OVER"),D||(A.draw(l),P.draw(l),T.draw(l),E.draw(l))}function C(){B=setInterval(j,1e3/60)}n.addEventListener("click",(function(){n.style.display="none",D=!1,k=!1,C()})),r.addEventListener("click",(function(){r.style.display="none",e.style.display="none",D=!1,k=!1,l.clearRect(0,0,t.width,t.height),P.x=t.width/2-b/2,P.y=t.height-2*P.width,P.y<=t.height-75&&(P.y=t.height-75),A.createEnemies(),A.currentDirection=u.right,E.bullets=[],E.timeTillNextBulletAllowed=0,T.bullets=[],T.timeTillNextBulletAllowed=0,clearInterval(B),C()}))}()}))}();
//# sourceMappingURL=scripts_d40d.js.map